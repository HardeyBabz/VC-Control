This is the new and updated newnote code. 